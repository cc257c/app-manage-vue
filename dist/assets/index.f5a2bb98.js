import{as as y,a as B,I as f,t as F,fA as k,a3 as A,f as h,fc as w,bd as C,au as n,o as g,j as I,x as r,m as t,n as u,y as c,z as d,h as D,ax as E,F as V}from"./index.da8cb631.js";import{T as x}from"./index.c918b06b.js";import{a as L}from"./index.4fb91daf.js";import"./index.13fe2a9f.js";import"./index.2a671509.js";import"./useSize.3251a39b.js";import"./eagerComputed.d5d9fa51.js";import"./index.0961799f.js";import"./useFlexGapSupport.63e06d71.js";import"./useWindowSizeFn.c221d32f.js";import"./useContentViewHeight.f6c045c6.js";import"./ArrowLeftOutlined.da248543.js";import"./index.17402399.js";import"./transButton.af3d1515.js";const O=B({components:{PageWrapper:L,[f.name]:f,InputTextArea:f.TextArea,Tag:x},setup(){const e=F({server:"ws://localhost:3300/test",sendValue:"",recordList:[]}),{status:o,data:l,send:v,close:T,open:b}=k(e.server,{autoReconnect:!1,heartbeat:!0});A(()=>{if(l.value)try{const s=JSON.parse(l.value);e.recordList.push(s)}catch{e.recordList.push({res:l.value,id:Math.ceil(Math.random()*1e3),time:new Date().getTime()})}});const a=h(()=>o.value==="OPEN"),p=h(()=>a.value?"success":"red"),i=h(()=>[...e.recordList].reverse());function m(){v(e.sendValue),e.sendValue=""}function _(){a.value?T():b()}return{status:o,formatToDateTime:w,...C(e),handlerSend:m,getList:i,toggle:_,getIsOpen:a,getTagColor:p}}}),S={class:"flex"},N={class:"w-1/3 bg-white p-4"},W={class:"flex items-center"},P=t("span",{class:"text-lg font-medium mr-4"}," \u8FDE\u63A5\u72B6\u6001: ",-1),$=t("hr",{class:"my-4"},null,-1),M={class:"flex"},R=c(" \u670D\u52A1\u5730\u5740 "),U=t("p",{class:"text-lg font-medium mt-4"},"\u8BBE\u7F6E",-1),j=t("hr",{class:"my-4"},null,-1),z=c(" \u53D1\u9001 "),J={class:"w-2/3 bg-white ml-4 p-4"},q=t("span",{class:"text-lg font-medium mr-4"}," \u6D88\u606F\u8BB0\u5F55: ",-1),G=t("hr",{class:"my-4"},null,-1),H={class:"max-h-80 overflow-auto"},K={class:"flex items-center"},Q=t("span",{class:"mr-2 text-primary font-medium"},"\u6536\u5230\u6D88\u606F:",-1);function X(e,o,l,v,T,b){const a=n("Tag"),p=n("a-input"),i=n("a-button"),m=n("InputTextArea"),_=n("PageWrapper");return g(),I(_,{title:"WebSocket \u793A\u4F8B"},{default:r(()=>[t("div",S,[t("div",N,[t("div",W,[P,u(a,{color:e.getTagColor},{default:r(()=>[c(d(e.status),1)]),_:1},8,["color"])]),$,t("div",M,[u(p,{value:e.server,"onUpdate:value":o[0]||(o[0]=s=>e.server=s),disabled:""},{addonBefore:r(()=>[R]),_:1},8,["value"]),u(i,{type:e.getIsOpen?"danger":"primary",onClick:e.toggle},{default:r(()=>[c(d(e.getIsOpen?"\u5173\u95ED\u8FDE\u63A5":"\u5F00\u542F\u8FDE\u63A5"),1)]),_:1},8,["type","onClick"])]),U,j,u(m,{placeholder:"\u9700\u8981\u53D1\u9001\u5230\u670D\u52A1\u5668\u7684\u5185\u5BB9",disabled:!e.getIsOpen,value:e.sendValue,"onUpdate:value":o[1]||(o[1]=s=>e.sendValue=s),allowClear:""},null,8,["disabled","value"]),u(i,{type:"primary",block:"",class:"mt-4",disabled:!e.getIsOpen,onClick:e.handlerSend},{default:r(()=>[z]),_:1},8,["disabled","onClick"])]),t("div",J,[q,G,t("div",H,[t("ul",null,[(g(!0),D(V,null,E(e.getList,s=>(g(),D("li",{class:"mt-2",key:s.time},[t("div",K,[Q,t("span",null,d(e.formatToDateTime(s.time)),1)]),t("div",null,d(s.res),1)]))),128))])])])])]),_:1})}var pe=y(O,[["render",X]]);export{pe as default};
