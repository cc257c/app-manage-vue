import{c as Y,a as I,b as z,f as w,as as A,au as v,o as p,h as C,F as ie,ay as u,j as $,x as b,y as H,z as P,av as S,k as _,q as y,bn as G,dc as le,aF as L,m as E,n as V,bF as ce,s as m,dL as de,Z as M,dZ as x,i as s,ag as k,d1 as pe,ah as J,at as K,bR as ue,aw as Z,w as fe,ax as ge,az as we,aA as be,aq as T,t as Q,ar as W,d_ as he,ak as ve,dY as X,a3 as me,aB as ye}from"./index.da8cb631.js";import{D as De}from"./index.9430cdfe.js";import{A as ke}from"./ArrowLeftOutlined.da248543.js";const{t:U}=Y(),ee={confirmLoading:{type:Boolean},showCancelBtn:{type:Boolean,default:!0},cancelButtonProps:Object,cancelText:{type:String,default:U("common.cancelText")},showOkBtn:{type:Boolean,default:!0},okButtonProps:Object,okText:{type:String,default:U("common.okText")},okType:{type:String,default:"primary"},showFooter:{type:Boolean},footerHeight:{type:[String,Number],default:60}},Ce={isDetail:{type:Boolean},title:{type:String,default:""},loadingText:{type:String},showDetailBack:{type:Boolean,default:!0},visible:{type:Boolean},loading:{type:Boolean},maskClosable:{type:Boolean,default:!0},getContainer:{type:[Object,String]},closeFunc:{type:[Function,Object],default:null},destroyOnClose:{type:Boolean},...ee};const _e=I({name:"BasicDrawerFooter",props:{...ee,height:{type:String,default:"60px"}},emits:["ok","close"],setup(e,{emit:a}){const{prefixCls:o}=z("basic-drawer-footer"),l=w(()=>{const t=`${e.height}`;return{height:t,lineHeight:`calc(${t} - 1px)`}});function n(){a("ok")}function c(){a("close")}return{handleOk:n,prefixCls:o,handleClose:c,getStyle:l}}});function $e(e,a,o,l,n,c){const t=v("a-button");return e.showFooter||e.$slots.footer?(p(),C("div",{key:0,class:y(e.prefixCls),style:G(e.getStyle)},[e.$slots.footer?u(e.$slots,"footer",{key:1}):(p(),C(ie,{key:0},[u(e.$slots,"insertFooter"),e.showCancelBtn?(p(),$(t,S({key:0},e.cancelButtonProps,{onClick:e.handleClose,class:"mr-2"}),{default:b(()=>[H(P(e.cancelText),1)]),_:1},16,["onClick"])):_("",!0),u(e.$slots,"centerFooter"),e.showOkBtn?(p(),$(t,S({key:1,type:e.okType,onClick:e.handleOk},e.okButtonProps,{class:"mr-2",loading:e.confirmLoading}),{default:b(()=>[H(P(e.okText),1)]),_:1},16,["type","onClick","loading"])):_("",!0),u(e.$slots,"appendFooter")],64))],6)):_("",!0)}var Be=A(_e,[["render",$e]]);const Pe=I({name:"BasicDrawerHeader",components:{BasicTitle:le,ArrowLeftOutlined:ke},props:{isDetail:L.bool,showDetailBack:L.bool,title:L.string},emits:["close"],setup(e,{emit:a}){const{prefixCls:o}=z("basic-drawer-header");function l(){a("close")}return{prefixCls:o,handleClose:l}}}),Se={key:1};function Te(e,a,o,l,n,c){const t=v("BasicTitle"),i=v("ArrowLeftOutlined");return e.isDetail?(p(),C("div",{key:1,class:y([e.prefixCls,`${e.prefixCls}--detail`])},[E("span",{class:y(`${e.prefixCls}__twrap`)},[e.showDetailBack?(p(),C("span",{key:0,onClick:a[0]||(a[0]=(...d)=>e.handleClose&&e.handleClose(...d))},[V(i,{class:y(`${e.prefixCls}__back`)},null,8,["class"])])):_("",!0),e.title?(p(),C("span",Se,P(e.title),1)):_("",!0)],2),E("span",{class:y(`${e.prefixCls}__toolbar`)},[u(e.$slots,"titleToolbar")],2)],2)):(p(),$(t,{key:0,class:y(e.prefixCls)},{default:b(()=>[u(e.$slots,"title"),H(" "+P(e.$slots.title?"":e.title),1)]),_:3},8,["class"]))}var Fe=A(Pe,[["render",Te]]);const Oe=I({components:{Drawer:De,ScrollContainer:ce,DrawerFooter:Be,DrawerHeader:Fe},inheritAttrs:!1,props:Ce,emits:["visible-change","ok","close","register"],setup(e,{emit:a}){const o=m(!1),l=de(),n=m(null),{t:c}=Y(),{prefixVar:t,prefixCls:i}=z("basic-drawer"),d={setDrawerProps:ae,emitVisible:void 0},f=T();f&&a("register",d,f.uid);const B=w(()=>x(k(e),s(n))),h=w(()=>{const r={placement:"right",...s(l),...s(B),visible:s(o)};r.title=void 0;const{isDetail:g,width:O,wrapClassName:j,getContainer:ne}=r;if(g){O||(r.width="100%");const q=`${i}__detail`;r.class=j?`${j} ${q}`:q,ne||(r.getContainer=`.${t}-layout-content`)}return r}),F=w(()=>({...l,...s(h)})),N=w(()=>{const{footerHeight:r,showFooter:g}=s(h);return g&&r?pe(r)?`${r}px`:`${r.replace("px","")}px`:"0px"}),te=w(()=>{const r=s(N);return{position:"relative",height:`calc(100% - ${r})`}}),re=w(()=>!!s(h)?.loading);M(()=>e.visible,(r,g)=>{r!==g&&(o.value=r)},{deep:!0}),M(()=>o.value,r=>{J(()=>{a("visible-change",r),f&&d.emitVisible?.(r,f.uid)})});async function oe(r){const{closeFunc:g}=s(h);if(a("close",r),g&&K(g)){const O=await g();o.value=!O;return}o.value=!1}function ae(r){n.value=x(s(n)||{},r),Reflect.has(r,"visible")&&(o.value=!!r.visible)}function se(){a("ok")}return{onClose:oe,t:c,prefixCls:i,getMergeProps:B,getScrollContentStyle:te,getProps:h,getLoading:re,getBindValues:F,getFooterHeight:N,handleOk:se}}});function Le(e,a,o,l,n,c){const t=v("DrawerHeader"),i=v("ScrollContainer"),d=v("DrawerFooter"),f=v("Drawer"),B=ue("loading");return p(),$(f,S({class:e.prefixCls,onClose:e.onClose},e.getBindValues),Z({default:b(()=>[fe((p(),$(i,{style:G(e.getScrollContentStyle),"loading-tip":e.loadingText||e.t("common.loadingText")},{default:b(()=>[u(e.$slots,"default")]),_:3},8,["style","loading-tip"])),[[B,e.getLoading]]),V(d,S(e.getProps,{onClose:e.onClose,onOk:e.handleOk,height:e.getFooterHeight}),Z({_:2},[ge(Object.keys(e.$slots),h=>({name:h,fn:b(F=>[u(e.$slots,h,we(be(F||{})))])}))]),1040,["onClose","onOk","height"])]),_:2},[e.$slots.title?{name:"title",fn:b(()=>[u(e.$slots,"title")])}:{name:"title",fn:b(()=>[V(t,{title:e.getMergeProps.title,isDetail:e.isDetail,showDetailBack:e.showDetailBack,onClose:e.onClose},{titleToolbar:b(()=>[u(e.$slots,"titleToolbar")]),_:3},8,["title","isDetail","showDetailBack","onClose"])])}]),1040,["class","onClose"])}var He=A(Oe,[["render",Le]]);const D=Q({}),R=Q({});function ze(){if(!T())throw new Error("useDrawer() can only be used inside setup() or functional components!");const e=m(null),a=m(!1),o=m("");function l(t,i){W(()=>{e.value=null,a.value=null,D[s(o)]=null}),!(s(a)&&he()&&t===s(e))&&(o.value=i,e.value=t,a.value=!0,t.emitVisible=(d,f)=>{R[f]=d})}const n=()=>{const t=s(e);return t||X("useDrawer instance is undefined!"),t},c={setDrawerProps:t=>{n()?.setDrawerProps(t)},getVisible:w(()=>R[~~s(o)]),openDrawer:(t=!0,i,d=!0)=>{if(n()?.setDrawerProps({visible:t}),!i)return;if(d){D[s(o)]=null,D[s(o)]=k(i);return}ve(k(D[s(o)]),k(i))||(D[s(o)]=k(i))},closeDrawer:()=>{n()?.setDrawerProps({visible:!1})}};return[l,c]}const Ae=e=>{const a=m(null),o=T(),l=m("");if(!T())throw new Error("useDrawerInner() can only be used inside setup() or functional components!");const n=()=>{const t=s(a);if(!t){X("useDrawerInner instance is undefined!");return}return t},c=(t,i)=>{W(()=>{a.value=null}),l.value=i,a.value=t,o?.emit("register",t,i)};return me(()=>{const t=D[s(l)];!t||!e||!K(e)||J(()=>{e(t)})}),[c,{changeLoading:(t=!0)=>{n()?.setDrawerProps({loading:t})},changeOkLoading:(t=!0)=>{n()?.setDrawerProps({confirmLoading:t})},getVisible:w(()=>R[~~s(l)]),closeDrawer:()=>{n()?.setDrawerProps({visible:!1})},setDrawerProps:t=>{n()?.setDrawerProps(t)}}]},Ne=ye(He);export{Ne as B,Ae as a,ze as u};
