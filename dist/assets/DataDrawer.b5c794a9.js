import{a as U,B as q}from"./index.658b646d.js";import{B as V}from"./BasicForm.4eff3114.js";import{u as j}from"./useForm.8ce8a1bf.js";import{c as L}from"./config.f9178ad3.js";import{n as l,b0 as R,t as S,as as M,a as N,s as p,o as F,j as z,x as s,h as $,k as H,i as o,B as b,av as T,y as I,en as g}from"./index.da8cb631.js";import{a as G,u as W}from"./window.3fa4c8a1.js";import{U as X}from"./index.f175a2ab.js";import"./index.3443a9a6.js";var J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},Q=J;function h(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.forEach(function(n){Y(a,n,t[n])})}return a}function Y(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var m=function(e,t){var r=h({},e,t.attrs);return l(R,h({},r,{icon:Q}),null)};m.displayName="UploadOutlined";m.inheritAttrs=!1;var Z=m;const c=S({api_version:[],app_status:[],status:[]});async function K(){let{api_version:a,app_status:e,status:t}=await L();c.api_version=a,c.app_status=e,c.status=t}await K();const ee=[{label:"IP",field:"ip",component:"Input",required:!0},{label:"\u540D\u79F0",field:"name",component:"Input",required:!0},{label:"\u5F00\u53D1\u8005\u6CE8\u518C\u624B\u673A\u53F7",field:"mobile",component:"Input",required:!0},{label:"\u5356\u5BB6",field:"seller",component:"Input",required:!0},{label:"\u767B\u5F55\u5BC6\u7801",field:"login_password",component:"InputTextArea",required:!0},{label:"\u5F00\u59CB\u65F6\u95F4",field:"start_date",component:"DatePicker",required:!0},{label:"\u5230\u671F\u65F6\u95F4",field:"due_date",component:"DatePicker",required:!0},{label:"VPN\u7AEF\u53E3",field:"vpn_port",component:"Input",required:!0},{label:"\u4FE1\u7528\u5361",field:"credit_card",component:"Input",required:!0},{label:"ktp_url",field:"ktp_url",component:"Upload",slot:"ktp_url"},{label:"Email",field:"email",component:"Input",required:!0},{label:"\u5907\u6CE8",field:"note",component:"Input"}],fe=[{title:"ID",dataIndex:"id",defaultHidden:!0},{title:"APP",dataIndex:"app_id"},{title:"IP",dataIndex:"ip"},{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u5F00\u53D1\u8005\u6CE8\u518C\u624B\u673A\u53F7",dataIndex:"mobile"},{title:"\u5356\u5BB6",dataIndex:"seller"},{title:"\u767B\u5F55\u5BC6\u7801",dataIndex:"login_password"},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"start_date"},{title:"\u5230\u671F\u65F6\u95F4",dataIndex:"due_date"},{title:"VPN\u7AEF\u53E3",dataIndex:"vpn_port"},{title:"\u4FE1\u7528\u5361",dataIndex:"credit_card"},{title:"ktp_url",dataIndex:"ktp_url"},{title:"Email",dataIndex:"email"},{title:"\u72B6\u6001",dataIndex:"status",customRender:({text:a})=>a==1?"\u4F7F\u7528\u4E2D":"\u5E9F\u5F03"},{title:"\u5907\u6CE8",dataIndex:"note"}];const te=["href"],ae=I(" \u4E0A\u4F20\u56FE\u7247 "),ue=I("\u4FDD\u5B58"),re=N({__name:"DataDrawer",emits:["successAdd","register"],setup(a,{emit:e}){const t=p(),r=p(),n=p(),[B,{closeDrawer:w,changeLoading:f}]=U(async u=>{t.value=u.app_id}),[x,{validate:E,resetFields:D}]=j({schemas:ee,showActionButtonGroup:!1,labelWidth:"120px",baseColProps:{span:24}});function y(u,d){const i=new FileReader;i.addEventListener("load",()=>d(i.result)),i.readAsDataURL(u)}const C=u=>{if(!(u.file.size/1024/1024<2)){g.error("\u56FE\u7247\u5927\u5C0F\u5C0F\u4E8E2M!");return}const i=u.file.name;y(u.file,k=>{let P=k.split("base64,"),A={name:i,content:P[1]};W(A).then(v=>{r.value=v.preview,n.value=v.url})})};async function O(){if(n.value==""){g.error("\u8BF7\u4E0A\u4F20\u56FE\u7247!");return}try{const u=await E();f(!0),await G({...u,app_id:t.value,ktp_url:n.value}),_(),e("successAdd")}finally{f(!1)}}function _(){r.value="",n.value="",w(),D()}return(u,d)=>(F(),z(o(q),T(u.$attrs,{onRegister:o(B),showFooter:!1,width:"50%",onClose:_}),{default:s(()=>[l(o(V),{onRegister:o(x)},{ktp_url:s(()=>[r.value?(F(),$("a",{key:0,href:r.value,target:"_blank"},"\u67E5\u770B\u56FE\u7247",8,te)):H("",!0),l(o(X),{name:"name",showUploadList:!1,class:"upload-list-inline",customRequest:C},{default:s(()=>[l(o(b),null,{default:s(()=>[l(o(Z)),ae]),_:1})]),_:1})]),_:1},8,["onRegister"]),l(o(b),{type:"primary",style:{position:"absolute",left:"50%",transform:"translateX(-50%)"},onClick:O},{default:s(()=>[ue]),_:1})]),_:1},16,["onRegister"]))}});var ne=M(re,[["__scopeId","data-v-5d5b4695"]]),_e=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"}));export{ne as D,_e as a,fe as c};
