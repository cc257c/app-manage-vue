import{a as N,cC as T,b8 as L,cg as $,s as w,aD as q,ah as k,as as V,au as c,o as u,h as g,n as _,bn as A,m as F,x as p,F as I,ax as W,j as Y,y as z,z as R,bm as j,k as H,ay as O}from"./index.da8cb631.js";import{B as G}from"./BasicForm.4eff3114.js";import{u as J}from"./useForm.8ce8a1bf.js";const K=N({components:{BasicForm:G,Dropdown:T,Menu:L,MenuItem:$},props:{schemas:{type:Array,default:[],required:!0},fieldMapToTime:{type:Array,default:[["date",["start_date","end_date"],"YYYY-MM-DD"]]},slotWidth:{type:Number,default:0},map:{type:Boolean,default:!0},immediate:{type:Boolean,default:!0}},emits:["success"],setup(a,{emit:r}){let y=a.schemas,f=[],n=[],m=[];const h=w("\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6"),l=w([]);S();const[b,{appendSchemaByField:v,removeSchemaByFiled:s,getFieldsValue:C}]=J({showResetButton:!1,schemas:f,compact:!0,actionColOptions:{span:1},fieldMapToTime:a.map?a.fieldMapToTime:[]});function S(){y.forEach((e,t)=>{if(e.show)m.push(e.label),f.push(e);else{n.push(e);let o={label:e.label,value:e.field,disabled:!1,index:t};l.value.push(o)}});for(let e in n)delete n[e].show}function M({key:e}){n.forEach(t=>{t.field==e&&v(t,"")}),l.value.forEach(t=>{t.value==e&&(t.disabled=!0)}),setTimeout(()=>{D()},0)}function D(){k(()=>{let e=document.querySelectorAll(".suffix"),t=[];e.forEach(o=>{let i=o.parentNode.parentNode.parentNode.parentNode.parentNode.children[0].children[0].textContent;m.includes(i)||t.push(o)});for(let o=0;o<t.length;o++){let i=function(E){let B=E.path[7].children[0].children[0].textContent;n.forEach(d=>{d.label==B&&s(d.field)}),l.value.forEach(d=>{d.label==B&&(d.disabled=!1)})};t[o].innerHTML=`<span>${t[o].textContent=="false"?"":t[o].textContent}</span><svg t="1667872874672" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1386" width="16" height="16"><path d="M512 595.84765625l195.69757462 195.69757462a59.2473793 59.2473793 0 1 0 83.84765625-83.84765625L595.92644882 512l195.61878205-195.69757462a59.2473793 59.2473793 0 1 0-83.84765625-83.84765625L512 428.07355118 316.30242538 232.45476913a59.2473793 59.2473793 0 1 0-83.84765625 83.84765625L428.07355118 512 232.45476913 707.69757462a59.2473793 59.2473793 0 1 0 83.84765625 83.84765625L512 595.92644882z" fill="#d81e06" p-id="1387"></path></svg>`,t[o].addEventListener("click",i)}})}function x(){const e=C();r("success",e)}return q(()=>{k(()=>{let e=document.querySelector(".ant-row"),t=document.querySelector(".add-condition"),o=document.querySelector(".slot"),i=document.querySelector(".ant-col-1");e?.insertBefore(t,i),e?.appendChild(o),a.immediate&&x()})}),{selectValue:h,options:l,registerForm:b,handelClick:M,handleSubmit:x,slotWidth:a.slotWidth}}}),P={style:{"margin-bottom":"16px",padding:"10px","background-color":"white"}},Q={class:"add-condition"},U={class:"slot"};function X(a,r,y,f,n,m){const h=c("BasicForm"),l=c("MenuItem"),b=c("Menu"),v=c("Dropdown");return u(),g("div",P,[_(h,{onRegister:a.registerForm,onSubmit:a.handleSubmit,style:A({width:`calc(100% - ${a.slotWidth}px)`})},null,8,["onRegister","onSubmit","style"]),F("div",Q,[_(v,{placement:"bottom",trigger:["click"]},{overlay:p(()=>[_(b,{onClick:a.handelClick},{default:p(()=>[(u(!0),g(I,null,W(a.options,s=>(u(),Y(l,{key:s.value,disabled:s.disabled},{default:p(()=>[z(R(s.label),1)]),_:2},1032,["disabled"]))),128))]),_:1},8,["onClick"])]),default:p(()=>[a.options.length!=0?(u(),g("a",{key:0,class:"ant-dropdown-link",onClick:r[0]||(r[0]=j(()=>{},["prevent"]))}," \u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6 ")):H("",!0)]),_:1})]),F("div",U,[O(a.$slots,"end",{},void 0,!0)])])}var ae=V(K,[["render",X],["__scopeId","data-v-1b3cff98"]]);export{ae as F};
