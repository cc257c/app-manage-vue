import{B as F,a as E}from"./index.59b50bd4.js";import{B}from"./BasicForm.4eff3114.js";import{u as h}from"./useForm.8ce8a1bf.js";import{bT as v,as as _,a as M,s as D,i as c,f as P,au as d,o as C,j as I,x as N,n as S,av as T}from"./index.da8cb631.js";import{T as w}from"./index.c918b06b.js";import{a as y}from"./system.b1c25c76.js";const G=[{title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"deptName",width:160,align:"left"},{title:"\u6392\u5E8F",dataIndex:"orderNo",width:50},{title:"\u72B6\u6001",dataIndex:"status",width:80,customRender:({record:e})=>{const t=~~e.status===0,o=t?"green":"red",a=t?"\u542F\u7528":"\u505C\u7528";return v(w,{color:o},()=>a)}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180},{title:"\u5907\u6CE8",dataIndex:"remark"}],U=[{field:"deptName",label:"\u90E8\u95E8\u540D\u79F0",component:"Input",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"Select",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]},colProps:{span:8}}],k=[{field:"deptName",label:"\u90E8\u95E8\u540D\u79F0",component:"Input",required:!0},{field:"parentDept",label:"\u4E0A\u7EA7\u90E8\u95E8",component:"TreeSelect",componentProps:{fieldNames:{label:"deptName",key:"id",value:"id"},getPopupContainer:()=>document.body},required:!0},{field:"orderNo",label:"\u6392\u5E8F",component:"InputNumber",required:!0},{field:"status",label:"\u72B6\u6001",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"\u542F\u7528",value:"0"},{label:"\u505C\u7528",value:"1"}]},required:!0},{label:"\u5907\u6CE8",field:"remark",component:"InputTextArea"}],x=M({name:"DeptModal",components:{BasicModal:F,BasicForm:B},emits:["success","register"],setup(e,{emit:u}){const t=D(!0),[o,{resetFields:a,setFieldsValue:i,updateSchema:n,validate:r}]=h({labelWidth:100,baseColProps:{span:24},schemas:k,showActionButtonGroup:!1}),[p,{setModalProps:l,closeModal:m}]=E(async s=>{a(),l({confirmLoading:!1}),t.value=!!s?.isUpdate,c(t)&&i({...s.record});const g=await y();n({field:"parentDept",componentProps:{treeData:g}})}),f=P(()=>c(t)?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8");async function b(){try{const s=await r();l({confirmLoading:!0}),m(),u("success")}finally{l({confirmLoading:!1})}}return{registerModal:p,registerForm:o,getTitle:f,handleSubmit:b}}});function R(e,u,t,o,a,i){const n=d("BasicForm"),r=d("BasicModal");return C(),I(r,T(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:N(()=>[S(n,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var $=_(x,[["render",R]]),z=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{$ as D,z as a,G as c,U as s};
